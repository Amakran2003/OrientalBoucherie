import{j as e}from"./ui-vendor.JalVFfQ9.js";import{r as n,L as t,e as r}from"./react-vendor.pFVYCVC2.js";import{c as i,u as s,L as l}from"./index.kDMhJFkA.js";import{P as c}from"./PageHeader.NtosuRjp.js";import{u as o}from"./useFormatDate.BDUOTk8q.js";import"./i18n-vendor.BK02QeAD.js";const a=({title:n,publishedAt:t,prepTime:r,cookTime:i,servings:s})=>{const{formatDate:l}=o();return e.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center mb-6 pb-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:["Publié le ",l(t)]}),e.jsx("h1",{className:"text-3xl font-semibold",children:n})]}),e.jsxs("div",{className:"flex gap-6",children:[r&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Préparation"}),e.jsxs("span",{className:"font-semibold",children:[r," min"]})]}),i&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Cuisson"}),e.jsxs("span",{className:"font-semibold",children:[i," min"]})]}),s&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Personnes"}),e.jsx("span",{className:"font-semibold",children:s})]})]})]})},d=({ingredients:n})=>n&&0!==n.length?e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Ingrédients"}),e.jsx("ul",{className:"space-y-2",children:n.map(((n,t)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-red-700 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"})}),e.jsxs("span",{className:"text-gray-800 dark:text-gray-200",children:[e.jsx("strong",{children:n.amount})," ",n.ingredient]})]},t)))})]}):null;function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){p(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function h(e){return"span"===e._type&&"text"in e&&"string"==typeof e.text&&(typeof e.marks>"u"||Array.isArray(e.marks)&&e.marks.every((e=>"string"==typeof e)))}function f(e){return"string"==typeof e._type&&"@"!==e._type[0]&&(!("markDefs"in e)||!e.markDefs||Array.isArray(e.markDefs)&&e.markDefs.every((e=>"string"==typeof e._key)))&&"children"in e&&Array.isArray(e.children)&&e.children.every((e=>"object"==typeof e&&"_type"in e))}function x(e){return f(e)&&"listItem"in e&&"string"==typeof e.listItem&&(typeof e.level>"u"||"number"==typeof e.level)}function y(e){return"@list"===e._type}function j(e){return"@span"===e._type}function g(e){return"@text"===e._type}const b=["strong","em","code","underline","strike-through"];function v(e,n,t){if(!h(e)||!e.marks)return[];if(!e.marks.length)return[];const r=e.marks.slice(),i={};return r.forEach((e=>{i[e]=1;for(let r=n+1;r<t.length;r++){const n=t[r];if(!(n&&h(n)&&Array.isArray(n.marks)&&-1!==n.marks.indexOf(e)))break;i[e]++}})),r.sort(((e,n)=>function(e,n,t){const r=e[n],i=e[t];if(r!==i)return i-r;const s=b.indexOf(n),l=b.indexOf(t);return s!==l?s-l:n.localeCompare(t)}(i,e,n)))}function k(e,n){return(e.level||1)===n.level&&e.listItem===n.listItem}function N(e,n,t){return{_type:"@list",_key:`${e._key||`${n}`}-parent`,mode:t,level:e.level||1,listItem:e.listItem,children:[e]}}function w(e,n){const t=n.level||1,r=n.listItem||"normal",i="string"==typeof n.listItem;if(y(e)&&(e.level||1)===t&&i&&(e.listItem||"normal")===r)return e;if(!("children"in e))return;const s=e.children[e.children.length-1];return s&&!h(s)?w(s,n):void 0}function I(e){let n="";return e.children.forEach((e=>{g(e)?n+=e.text:j(e)&&(n+=I(e))})),n}const O=["block","list","listItem","marks","types"],_=["listItem"],P=["_key"];function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){D(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function D(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function A(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.includes(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.includes(t)||{}.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}const $={textDecoration:"underline"},E=(e,n)=>`[@portabletext/react] Unknown ${e}, specify a component for it in the \`components.${n}\` prop`,L=e=>E(`block type "${e}"`,"types");function M(e){}const B={display:"none"},z={types:{},block:{normal:({children:n})=>e.jsx("p",{children:n}),blockquote:({children:n})=>e.jsx("blockquote",{children:n}),h1:({children:n})=>e.jsx("h1",{children:n}),h2:({children:n})=>e.jsx("h2",{children:n}),h3:({children:n})=>e.jsx("h3",{children:n}),h4:({children:n})=>e.jsx("h4",{children:n}),h5:({children:n})=>e.jsx("h5",{children:n}),h6:({children:n})=>e.jsx("h6",{children:n})},marks:{em:({children:n})=>e.jsx("em",{children:n}),strong:({children:n})=>e.jsx("strong",{children:n}),code:({children:n})=>e.jsx("code",{children:n}),underline:({children:n})=>e.jsx("span",{style:$,children:n}),"strike-through":({children:n})=>e.jsx("del",{children:n}),link:({children:n,value:t})=>e.jsx("a",{href:null==t?void 0:t.href,children:n})},list:{number:({children:n})=>e.jsx("ol",{children:n}),bullet:({children:n})=>e.jsx("ul",{children:n})},listItem:({children:n})=>e.jsx("li",{children:n}),hardBreak:()=>e.jsx("br",{}),unknownType:({value:n,isInline:t})=>{const r=L(n._type);return t?e.jsx("span",{style:B,children:r}):e.jsx("div",{style:B,children:r})},unknownMark:({markType:n,children:t})=>e.jsx("span",{className:`unknown__pt__mark__${n}`,children:t}),unknownList:({children:n})=>e.jsx("ul",{children:n}),unknownListItem:({children:n})=>e.jsx("li",{children:n}),unknownBlockStyle:({children:n})=>e.jsx("p",{children:n})};function C(e,n,t){const r=n[t],i=e[t];return"function"==typeof r||r&&"function"==typeof i?r:r?T(T({},i),r):i}function F({value:t,components:r,listNestingMode:i,onMissingComponent:s=M}){const l=s||R,c=function(e,n){const t=[];let r;for(let i=0;i<e.length;i++){const s=e[i];if(s){if(!x(s)){t.push(s),r=void 0;continue}if(!r){r=N(s,i,n),t.push(r);continue}if(k(s,r)){r.children.push(s);continue}if((s.level||1)>r.level){const e=N(s,i,n);if("html"===n){const n=r.children[r.children.length-1],t=m(m({},n),{},{children:[...n.children,e]});r.children[r.children.length-1]=t}else r.children.push(e);r=e;continue}if((s.level||1)<r.level){const e=t[t.length-1],l=e&&w(e,s);if(l){r=l,r.children.push(s);continue}r=N(s,i,n),t.push(r);continue}if(s.listItem!==r.listItem){const e=t[t.length-1],l=e&&w(e,{level:s.level||1});if(l&&l.listItem===s.listItem){r=l,r.children.push(s);continue}r=N(s,i,n),t.push(r);continue}t.push(s)}}return t}(Array.isArray(t)?t:[t],i||"html"),o=n.useMemo((()=>r?function(e,n){const{block:t,list:r,listItem:i,marks:s,types:l}=n,c=A(n,O);return T(T({},e),{},{block:C(e,n,"block"),list:C(e,n,"list"),listItem:C(e,n,"listItem"),marks:C(e,n,"marks"),types:C(e,n,"types")},c)}(z,r):z),[r]),a=n.useMemo((()=>q(o,l)),[o,l]),d=c.map(((e,n)=>a({node:e,index:n,isInline:!1,renderNode:a})));return e.jsx(e.Fragment,{children:d})}const q=(n,t)=>{function r(i){const{node:s,index:l,isInline:c}=i,o=s._key||`node-${l}`;return y(s)?function(i,s,l){const c=i.children.map(((e,n)=>r({node:e._key?e:T(T({},e),{},{_key:`li-${s}-${n}`}),index:n,isInline:!1}))),o=n.list,a=("function"==typeof o?o:o[i.listItem])||n.unknownList;if(a===n.unknownList){const e=i.listItem||"bullet";t(E(`list style "${e}"`,"list"),{nodeType:"listStyle",type:e})}return e.jsx(a,{value:i,index:s,isInline:!1,renderNode:r,children:c},l)}(s,l,o):x(s)?function(i,s,l){const c=K({node:i,index:s,isInline:!1,renderNode:r}),o=n.listItem,a=("function"==typeof o?o:o[i.listItem])||n.unknownListItem;if(a===n.unknownListItem){const e=i.listItem||"bullet";t(E(`list item style "${e}"`,"listItem"),{type:e,nodeType:"listItemStyle"})}let d=c.children;if(i.style&&"normal"!==i.style){const{listItem:e}=i;d=r({node:A(i,_),index:s,isInline:!1})}return e.jsx(a,{value:i,index:s,isInline:!1,renderNode:r,children:d},l)}(s,l,o):j(s)?function(i,s,l){const{markDef:c,markType:o,markKey:a}=i,d=n.marks[o]||n.unknownMark,u=i.children.map(((e,n)=>r({node:e,index:n,isInline:!0})));return d===n.unknownMark&&t((e=>E(`mark type "${e}"`,"marks"))(o),{nodeType:"mark",type:o}),e.jsx(d,{text:I(i),value:c,markType:o,markKey:a,renderNode:r,children:u},l)}(s,0,o):function(e){return e._type in n.types}(s)?function(t,i,s,l){const c={value:t,isInline:l,index:i,renderNode:r},o=n.types[t._type];return o?e.jsx(o,T({},c),s):null}(s,l,o,c):f(s)?function(i,s,l,c){const o=K({node:i,index:s,isInline:c,renderNode:r}),{_key:a}=o,d=A(o,P),u=d.node.style||"normal",m=("function"==typeof n.block?n.block:n.block[u])||n.unknownBlockStyle;return m===n.unknownBlockStyle&&t((p=u,E(`block style "${p}"`,"block")),{nodeType:"blockStyle",type:u}),e.jsx(m,T(T({},d),{},{value:d.node,renderNode:r}),l);var p}(s,l,o,c):g(s)?function(t,r){if("\n"===t.text){const t=n.hardBreak;return t?e.jsx(t,{},r):"\n"}return t.text}(s,o):function(i,s,l,c){const o={value:i,isInline:c,index:s,renderNode:r};t(L(i._type),{nodeType:"block",type:i._type});const a=n.unknownType;return e.jsx(a,T({},o),l)}(s,l,o,c)}return r};function K(e){const{node:n,index:t,isInline:r,renderNode:i}=e,s=function(e){var n,t;const{children:r}=e,i=null!=(n=e.markDefs)?n:[];if(!r||!r.length)return[];const s=r.map(v),l={_type:"@span",children:[],markType:"<unknown>"};let c=[l];for(let o=0;o<r.length;o++){const e=r[o];if(!e)continue;const n=s[o]||[];let l=1;if(c.length>1)for(;l<c.length;l++){const e=(null==(t=c[l])?void 0:t.markKey)||"",r=n.indexOf(e);if(-1===r)break;n.splice(r,1)}c=c.slice(0,l);let a=c[c.length-1];if(a){for(const t of n){const n=null==i?void 0:i.find((e=>e._key===t)),r=n?n._type:t,s={_type:"@span",_key:e._key,children:[],markDef:n,markType:r,markKey:t};a.children.push(s),c.push(s),a=s}if(h(e)){const n=e.text.split("\n");for(let e=n.length;e-- >1;)n.splice(e,0,"\n");a.children=a.children.concat(n.map((e=>({_type:"@text",text:e}))))}else a.children=a.children.concat(e)}}return l.children}(n).map(((e,n)=>i({node:e,isInline:!0,index:n,renderNode:i})));return{_key:n._key||`block-${t}`,children:s,index:t,isInline:r,node:n}}function R(){}const H={types:{image:({value:n})=>e.jsxs("div",{className:"my-6",children:[e.jsx("img",{src:s(n).width(800).url(),alt:n.alt||"Image de recette",className:"rounded-lg mx-auto"}),n.caption&&e.jsx("p",{className:"text-center text-sm text-gray-600 mt-2",children:n.caption})]})},marks:{link:({children:n,value:t})=>{const r=t.href.startsWith("/")?void 0:"noreferrer noopener";return e.jsx("a",{href:t.href,rel:r,target:r?"_blank":void 0,className:"text-red-700 hover:underline",children:n})}}},U=({steps:n,colSpan:t})=>{if(!n||0===n.length)return null;return e.jsxs("div",{className:t,children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Préparation"}),e.jsx("div",{className:"space-y-6",children:n.map(((n,t)=>{return e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"bg-red-700 text-white w-6 h-6 rounded-full flex items-center justify-center mr-2",children:t+1}),e.jsx("h3",{className:"font-medium text-lg",children:n.title})]}),(r=n.description,r?"string"==typeof r?e.jsx("div",{className:"ml-8 text-gray-700 dark:text-gray-300",children:r}):Array.isArray(r)?e.jsx("div",{className:"ml-8 text-gray-700 dark:text-gray-300",children:e.jsx(F,{value:r,components:H})}):null:null),n.image&&e.jsx("div",{className:"mt-3 ml-8",children:e.jsx("img",{src:s(n.image).width(600).url(),alt:`Étape ${t+1}`,className:"rounded-md"})})]},t);var r}))})]})},W=({body:n,colSpan:t})=>n?e.jsxs("div",{className:t,children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Préparation"}),e.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:e.jsx(F,{value:n,components:H})})]}):null,G=({mainImage:n,title:r})=>e.jsxs(e.Fragment,{children:[e.jsxs(t,{to:"/recipes",className:"text-red-700 hover:underline mb-6 inline-flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Toutes les recettes"]}),n&&e.jsx("div",{className:"mb-8",children:e.jsx("img",{src:s(n).width(1200).url(),alt:r,className:"w-full h-auto rounded-lg shadow-md"})})]}),J=({message:n="La recette que vous recherchez n'existe pas."})=>e.jsxs("div",{className:"min-h-screen pt-32 pb-20 container-custom",children:[e.jsx("h1",{className:"text-3xl font-semibold mb-4",children:"Recette introuvable"}),e.jsx("p",{children:n}),e.jsx(t,{to:"/recipes",className:"text-red-700 hover:underline mt-4 inline-block",children:"Retour aux recettes"})]});function Q(){const{slug:t}=r(),{recipe:s,loading:o,error:u}=(e=>{const[t,r]=n.useState(null),[s,l]=n.useState(!0),[c,o]=n.useState(null);return n.useEffect((()=>{(async()=>{if(!e)return l(!1),void o("No recipe slug provided");l(!0),o(null);try{const n=await i(e);r(n)}catch(n){o("Failed to load recipe details")}finally{l(!1)}})()}),[e]),{recipe:t,loading:s,error:c}})(t);if(n.useEffect((()=>{window.scrollTo(0,0)}),[]),o)return e.jsx("div",{className:"min-h-screen pt-32 pb-20 flex justify-center items-start",children:e.jsx(l,{size:"md"})});if(u||!s)return e.jsx(J,{message:u||void 0});const m=s.ingredients&&s.ingredients.length>0?"lg:col-span-2":"lg:col-span-3";return e.jsxs(e.Fragment,{children:[e.jsx(c,{title:s.title,description:s.description||"Une recette délicieuse à préparer avec nos produits de qualité."}),e.jsxs("div",{className:"container-custom py-10",children:[e.jsx(G,{mainImage:s.mainImage,title:s.title}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8",children:[e.jsx(a,{title:s.title,publishedAt:s.publishedAt,prepTime:s.prepTime,cookTime:s.cookTime,servings:s.servings}),s.description&&e.jsx("div",{className:"mb-8",children:e.jsx("p",{className:"text-lg italic text-gray-700 dark:text-gray-300",children:s.description})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.ingredients&&s.ingredients.length>0&&e.jsx(d,{ingredients:s.ingredients}),s.steps&&s.steps.length>0?e.jsx(U,{steps:s.steps,colSpan:m}):s.body?e.jsx(W,{body:s.body,colSpan:m}):e.jsx("div",{className:m,children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Aucune instruction disponible pour cette recette."})})]})]})]})]})}export{Q as default};
