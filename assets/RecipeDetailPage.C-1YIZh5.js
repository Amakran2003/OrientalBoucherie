import{r as e,j as s,L as t}from"./react-vendor.esZCIC4a.js";import{c as r,u as a,L as l}from"./index.CihQ96hV.js";import{P as i}from"./PageHeader.BxC59dPc.js";import{u as n}from"./useFormatDate.D5hT0P_3.js";import{X as c,W as d}from"./vendor.C6ZqhxWp.js";import"./ui-vendor.DT1r0YP4.js";import"./i18n-vendor.DFFi2l9K.js";const m=({title:e,publishedAt:t,prepTime:r,cookTime:a,servings:l})=>{const{formatDate:i}=n();return s.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center mb-6 pb-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:["Publié le ",i(t)]}),s.jsx("h1",{className:"text-3xl font-semibold",children:e})]}),s.jsxs("div",{className:"flex gap-6",children:[r&&s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Préparation"}),s.jsxs("span",{className:"font-semibold",children:[r," min"]})]}),a&&s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Cuisson"}),s.jsxs("span",{className:"font-semibold",children:[a," min"]})]}),l&&s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Personnes"}),s.jsx("span",{className:"font-semibold",children:l})]})]})]})},o=({ingredients:e})=>e&&0!==e.length?s.jsxs("div",{className:"lg:col-span-1",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Ingrédients"}),s.jsx("ul",{className:"space-y-2",children:e.map(((e,t)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("svg",{className:"h-5 w-5 text-red-700 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"})}),s.jsxs("span",{className:"text-gray-800 dark:text-gray-200",children:[s.jsx("strong",{children:e.amount})," ",e.ingredient]})]},t)))})]}):null,x={types:{image:({value:e})=>s.jsxs("div",{className:"my-6",children:[s.jsx("img",{src:a(e).width(800).url(),alt:e.alt||"Image de recette",className:"rounded-lg mx-auto"}),e.caption&&s.jsx("p",{className:"text-center text-sm text-gray-600 mt-2",children:e.caption})]})},marks:{link:({children:e,value:t})=>{const r=t.href.startsWith("/")?void 0:"noreferrer noopener";return s.jsx("a",{href:t.href,rel:r,target:r?"_blank":void 0,className:"text-red-700 hover:underline",children:e})}}},h=({steps:e,colSpan:t})=>e&&0!==e.length?s.jsxs("div",{className:t,children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Préparation"}),s.jsx("div",{className:"space-y-6",children:e.map(((e,t)=>s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("div",{className:"bg-red-700 text-white w-6 h-6 rounded-full flex items-center justify-center mr-2",children:t+1}),s.jsx("h3",{className:"font-medium text-lg",children:e.title})]}),e.description&&s.jsx("div",{className:"ml-8 text-gray-700 dark:text-gray-300",children:s.jsx(c,{value:e.description,components:x})}),e.image&&s.jsx("div",{className:"mt-3 ml-8",children:s.jsx("img",{src:a(e.image).width(600).url(),alt:`Étape ${t+1}`,className:"rounded-md"})})]},t)))})]}):null,p=({body:e,colSpan:t})=>e?s.jsxs("div",{className:t,children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Préparation"}),s.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:s.jsx(c,{value:e,components:x})})]}):null,g=({mainImage:e,title:r})=>s.jsxs(s.Fragment,{children:[s.jsxs(t,{to:"/recipes",className:"text-red-700 hover:underline mb-6 inline-flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Toutes les recettes"]}),e&&s.jsx("div",{className:"mb-8",children:s.jsx("img",{src:a(e).width(1200).url(),alt:r,className:"w-full h-auto rounded-lg shadow-md"})})]}),j=({message:e="La recette que vous recherchez n'existe pas."})=>s.jsxs("div",{className:"min-h-screen pt-32 pb-20 container-custom",children:[s.jsx("h1",{className:"text-3xl font-semibold mb-4",children:"Recette introuvable"}),s.jsx("p",{children:e}),s.jsx(t,{to:"/recipes",className:"text-red-700 hover:underline mt-4 inline-block",children:"Retour aux recettes"})]});function u(){const{slug:t}=d(),{recipe:a,loading:n,error:c}=(s=>{const[t,a]=e.useState(null),[l,i]=e.useState(!0),[n,c]=e.useState(null);return e.useEffect((()=>{(async()=>{if(!s)return i(!1),void c("No recipe slug provided");i(!0),c(null);try{const e=await r(s);a(e)}catch(e){c("Failed to load recipe details")}finally{i(!1)}})()}),[s]),{recipe:t,loading:l,error:n}})(t);if(e.useEffect((()=>{window.scrollTo(0,0)}),[]),n)return s.jsx("div",{className:"min-h-screen pt-32 pb-20 flex justify-center items-start",children:s.jsx(l,{size:"md"})});if(c||!a)return s.jsx(j,{message:c||void 0});const x=a.ingredients&&a.ingredients.length>0?"lg:col-span-2":"lg:col-span-3";return s.jsxs(s.Fragment,{children:[s.jsx(i,{title:a.title,description:a.description||"Une recette délicieuse à préparer avec nos produits de qualité."}),s.jsxs("div",{className:"container-custom py-10",children:[s.jsx(g,{mainImage:a.mainImage,title:a.title}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8",children:[s.jsx(m,{title:a.title,publishedAt:a.publishedAt,prepTime:a.prepTime,cookTime:a.cookTime,servings:a.servings}),a.description&&s.jsx("div",{className:"mb-8",children:s.jsx("p",{className:"text-lg italic text-gray-700 dark:text-gray-300",children:a.description})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.ingredients&&a.ingredients.length>0&&s.jsx(o,{ingredients:a.ingredients}),a.steps&&a.steps.length>0?s.jsx(h,{steps:a.steps,colSpan:x}):a.body?s.jsx(p,{body:a.body,colSpan:x}):s.jsx("div",{className:x,children:s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Aucune instruction disponible pour cette recette."})})]})]})]})]})}export{u as default};
